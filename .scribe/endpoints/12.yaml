name: Saida
description: |-

  APIs para listar, cadastrar, editar e remover dados de saidas.
endpoints:
  -
    httpMethods:
      - GET
    uri: api/saidas
    metadata:
      title: 'Lista as saidas'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    queryParameters: []
    bodyParameters: []
    responses:
      -
        status: 401
        content: '{"message":"Unauthenticated."}'
        headers:
          cache-control: 'no-cache, private'
          content-type: application/json
          access-control-allow-origin: '*'
        description: null
    responseFields: []
  -
    httpMethods:
      - POST
    uri: api/saida
    metadata:
      title: 'Cadastra uma saida'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    queryParameters: []
    bodyParameters:
      departamento_id:
        name: departamento_id
        description: 'ID do Departamento.'
        required: false
        example: 2
        type: integer
        custom: []
      origem_id:
        name: origem_id
        description: 'ID do Origem.'
        required: false
        example: 1
        type: integer
        custom: []
      local_servico_id:
        name: local_servico_id
        description: 'ID do Local do serviço.'
        required: false
        example: 2
        type: integer
        custom: []
      ordem_servico_id:
        name: ordem_servico_id
        description: 'ID da Ordem de serviço (caso seja fornecido).'
        required: false
        example: 1
        type: integer
        custom: []
      justificativa_os:
        name: justificativa_os
        description: 'nullable Justificativa caso a saída seja sem OS.'
        required: false
        example: reforma
        type: text
        custom: []
    responses:
      -
        status: 200
        content: |-
          {
              "data": {
                  "id": 1,
                  "departamento_id": 2,
                  "origem_id": 1,
                  "local_servico_id": 2,
                  "ordem_servico_id": 1,
                  "justificativa_os": "Aberto sem OS devido a XYZ",
                  "status": "A Iniciar",
                  "baixa_datahora": "2022-08-12 08:59",
                  "baixa_user_id": 1,
                  "saida_profissionais": [
                      {
                          "id": 1,
                          "data_inicio": "2022-08-30",
                          "horas_empregadas": 6
                      },
                      {
                          "id": 2,
                          "data_inicio": "2022-08-31",
                          "horas_empregadas": 4
                      }
                  ],
                  "saida_items": [
                      {
                          "id": 1,
                          "enviado": 500
                      },
                      {
                          "id": 2,
                          "enviado": 480
                      }
                  ]
              }
          }
        headers: []
        description: '200'
    responseFields: []
  -
    httpMethods:
      - GET
    uri: 'api/saida/{id}'
    metadata:
      title: 'Mostra uma saida'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'ID da saida.'
        required: true
        example: 1
        type: integer
        custom: []
    queryParameters: []
    bodyParameters: []
    responses:
      -
        status: 200
        content: |-
          {
              "data": {
                  "id": 1,
                  "departamento_id": 2,
                  "ordem_servico_id": 1,
                  "almoxarife_nome": "João",
                  "almoxarife_email": "joao@teste.com.br",
                  "baixa_user_id": 1,
                  "baixa_datahora": "2022-08-12 08:59"
              }
          }
        headers: []
        description: '200'
    responseFields: []
  -
    httpMethods:
      - POST
    uri: 'api/saida/{id}'
    metadata:
      title: 'Edita uma saida'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'ID da ordem de serviço que deseja editar.'
        required: true
        example: 1
        type: integer
        custom: []
    queryParameters: []
    bodyParameters:
      departamento_id:
        name: departamento_id
        description: 'ID do Departamento.'
        required: false
        example: 2
        type: integer
        custom: []
      origem_id:
        name: origem_id
        description: ''
        required: true
        example: voluptatem
        type: string
        custom: []
      local_servico_id:
        name: local_servico_id
        description: ''
        required: true
        example: suscipit
        type: string
        custom: []
      ordem_servico_id:
        name: ordem_servico_id
        description: 'ID da Ordem de serviço.'
        required: false
        example: 1
        type: integer
        custom: []
      almoxarife_nome:
        name: almoxarife_nome
        description: 'Nome do Almoxarife.'
        required: true
        example: '"João"'
        type: string
        custom: []
      almoxarife_email:
        name: almoxarife_email
        description: 'E-mail do Almoxarife.'
        required: true
        example: '"joao@teste.com.br"'
        type: string
        custom: []
      baixa_user_id:
        name: baixa_user_id
        description: 'ID do usuario.'
        required: false
        example: 1
        type: integer
        custom: []
      baixa_datahora:
        name: baixa_datahora
        description: 'Data e hora da baixa.'
        required: true
        example: '"2022-08-12 08:59"'
        type: datetime
        custom: []
    responses:
      -
        status: 200
        content: |-
          {
              "data": {
                  "id": 1,
                  "departamento_id": 2,
                  "ordem_servico_id": 1,
                  "almoxarife_nome": "João",
                  "almoxarife_email": "joao@teste.com.br",
                  "baixa_user_id": 1,
                  "baixa_datahora": "2022-08-12 08:59"
              }
          }
        headers: []
        description: '200'
    responseFields: []
  -
    httpMethods:
      - DELETE
    uri: 'api/saida/{id}'
    metadata:
      title: 'Deleta uma saida'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'ID da saida que deseja deletar.'
        required: true
        example: 1
        type: integer
        custom: []
    queryParameters: []
    bodyParameters: []
    responses:
      -
        status: 200
        content: |-
          {
              "message": "Saida deletada com sucesso!",
              "data": {
                  "id": 1,
                  "departamento_id": 2,
                  "ordem_servico_id": 1,
                  "almoxarife_nome": "João",
                  "almoxarife_email": "joao@teste.com.br",
                  "baixa_user_id": 1,
                  "baixa_datahora": "2022-08-12 08:59"
              }
          }
        headers: []
        description: '200'
    responseFields: []
  -
    httpMethods:
      - GET
    uri: 'api/saida/{id}/items'
    metadata:
      title: 'Mostra os itens de uma ordem de serviço ou da saída'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'ID da ordem de serviço.'
        required: true
        example: 2
        type: integer
        custom: []
    queryParameters: []
    bodyParameters: []
    responses:
      -
        status: 200
        content: |-
          {
              "data": [
                  {
                      "id": 1,
                      "ordem_servico_id": 2,
                      "item_id": 1,
                      "quantidade": 10
                  },{
                      "id": 2,
                      "ordem_servico_id": 2,
                      "item_id": 3,
                      "quantidade": 800
                  }
              ]
          }
        headers: []
        description: '200'
    responseFields: []
  -
    httpMethods:
      - POST
    uri: 'api/saida/{id}/baixa'
    metadata:
      title: 'Emite a Baixa de uma ordem de serviço'
      description: ''
      authenticated: true
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'ID da ordem de serviço que deseja editar.'
        required: true
        example: 1
        type: integer
        custom: []
    queryParameters: []
    bodyParameters:
      saida_items:
        name: saida_items
        description: 'Itens da ordem de serviço.'
        required: true
        example:
          -
            id: 2
            enviado: 60
            usado: 50
            retorno: 10
          -
            id: 3
            enviado: 5
            usado: 3
            retorno: 2
        type: 'object[]'
        custom: []
      saida_items.id:
        name: saida_items.id
        description: 'ID do item.'
        required: true
        example: 2
        type: integer
        custom: []
      saida_items.enviado:
        name: saida_items.enviado
        description: 'Quantidade enviada do item para o local de serviço.'
        required: true
        example: 60
        type: integer
        custom: []
      saida_items.usado:
        name: saida_items.usado
        description: 'Quantidade usada do item para o serviço.'
        required: true
        example: 50
        type: integer
        custom: []
      saida_items.retorno:
        name: saida_items.retorno
        description: 'Quantidade a ser devolvida do item para a base de origem.'
        required: true
        example: 10
        type: integer
        custom: []
    responses:
      -
        status: 200
        content: |-
          {
              "message": "Baixa da Ordem de serviço efetuada com sucesso!",
              "data": {
                  "id": 1,
                  "departamento_id": 2,
                  "origem_id": 1,
                  "local_servico_id": 2,
                  "status": "Iniciada",
                  "data_inicio_servico": "2022-08-30T14:48",
                  "data_fim_servico": "2022-08-31T17:50",
                  "especificacao": "reforma",
                  "observacoes": "observações referente ao serviço",
                  "flg_baixa": 1,
                  "user_id": 1
              }
          }
        headers: []
        description: '200'
    responseFields: []
